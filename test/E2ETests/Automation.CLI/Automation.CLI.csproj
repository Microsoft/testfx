<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk" ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <TestFxRoot Condition="$(TestFxRoot) == ''">..\..\..\</TestFxRoot>
  </PropertyGroup>
  <Import Project="$(TestFxRoot)scripts\build\TestFx.Settings.targets" />
  <PropertyGroup>
    <OutputType>Library</OutputType>
    <RootNamespace>Automation.CLI</RootNamespace>
    <AssemblyName>Automation.CLI</AssemblyName>
    <TargetFrameworks>net46</TargetFrameworks>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System.Runtime" />
    <Reference Include="System" />
    <Reference Include="System.Configuration" />
    <Reference Include="System.Core" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="$(TestFxRoot)src\TestFramework\MSTest.Core\MSTest.Core.csproj" />
  </ItemGroup>
  <ItemGroup>
    <None Include="packages.config" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Microsoft.TestPlatform.TranslationLayer" Version="15.5.0" />
    <PackageReference Include="Newtonsoft.Json" Version="9.0.1" />
    <PackageReference Include="Microsoft.TestPlatform" Version="15.5.0" />
  </ItemGroup>
  <Import Project="$(TestFxRoot)scripts\build\TestFx.targets" />
  <PropertyGroup>
    <SourcePath>$(TargetDir)..\..\</SourcePath>
    <DestinationPath>$(TargetDir)..\..\..\TestAssets</DestinationPath>
    <PostBuildEvent>
      xcopy /Y /I "$(SourcePath)MSTest.CoreAdapter\net45\Microsoft.VisualStudio.TestPlatform.MSTest.TestAdapter.dll" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)MSTest.CoreAdapter\net45\Microsoft.VisualStudio.TestPlatform.MSTest.TestAdapter.pdb" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)PlatformServices.Desktop\net45\Microsoft.VisualStudio.TestPlatform.MSTestAdapter.PlatformServices.dll" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)PlatformServices.Desktop\net45\Microsoft.VisualStudio.TestPlatform.MSTestAdapter.PlatformServices.pdb" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)PlatformServices.Interface\net45\Microsoft.VisualStudio.TestPlatform.MSTestAdapter.PlatformServices.Interface.dll" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)PlatformServices.Interface\net45\Microsoft.VisualStudio.TestPlatform.MSTestAdapter.PlatformServices.Interface.pdb" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)MSTest.Core\netstandard1.1\Microsoft.VisualStudio.TestPlatform.TestFramework.dll" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)MSTest.Core\netstandard1.1\Microsoft.VisualStudio.TestPlatform.TestFramework.pdb" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)Extension.Desktop\net45\Microsoft.VisualStudio.TestPlatform.TestFramework.Extensions.dll" "$(DestinationPath)"
      xcopy /Y /I "$(SourcePath)Extension.Desktop\net45\Microsoft.VisualStudio.TestPlatform.TestFramework.Extensions.pdb" "$(DestinationPath)"
    </PostBuildEvent>
  </PropertyGroup>
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project>